<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Municipio | Índice de Calidad del Entorno</title>
<meta name="author" content="Diana Villasana Ocampo">
<meta name="description" content='{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],"label":["Calidad del...'>
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="Municipio | Índice de Calidad del Entorno">
<meta property="og:type" content="book">
<meta property="og:url" content="https://github.com/dvillasanao/ICE_2020/municipio-4.html">
<meta property="og:image" content="https://raw.githubusercontent.com/dvillasanao/ICE_2020/main/images/logo.svg">
<meta property="og:description" content='{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],"label":["Calidad del...'>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Municipio | Índice de Calidad del Entorno">
<meta name="twitter:description" content='{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],"label":["Calidad del...'>
<meta name="twitter:image" content="https://raw.githubusercontent.com/dvillasanao/ICE_2020/main/images/logo.svg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.7.0/transition.js"></script><script src="libs/bs3compat-0.7.0/tabs.js"></script><script src="libs/bs3compat-0.7.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/htmltools-fill-0.5.8.9000/fill.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.2/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<title></title>
<script>
        $(function() {
            $("#toc h2").html("Contenido");
        });
    </script><script>
        $(function() {
            $(".sidebar h2").html("Contenido");
        });
    </script><script>
      $(document).ready(function() {
        $head = $('#header');
        $head.prepend('<div class="knitr source"><img src="images/conapo.png" width="220px" align="right"   ></div>')
      });
    </script><script type="text/javascript">

    // toggle visibility of R source blocks in R Markdown output
    function toggle_R() {
      var x = document.getElementsByClassName('r');
      if (x.length == 0) return;
      function toggle_vis(o) {
        var d = o.style.display;
        o.style.display = (d == 'block' || d == '') ? 'none':'block';
      }

      for (i = 0; i < x.length; i++) {
        var y = x[i];
        if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
      }

        var elem = document.getElementById("myButton1");
        if (elem.value === "Hide Global") elem.value = "Show Global";
        else elem.value = "Hide Global";
    }

    document.write('<input onclick="toggle_R();" type="button" value="Hide Global" id="myButton1" style="position: absolute; top: 0%; right: 10%; z-index: 200"></input>')

    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-2 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>
    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Índice de Calidad del Entorno</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>
    <div id="main-nav" class="indice_izquierda">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>
      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introducción</a></li>
<li><a class="" href="metodolog%C3%ADa.html">Metodología</a></li>
<li><a class="" href="fuentes-de-informaci%C3%B3n.html">Fuentes de información</a></li>
<li><a class="active" href="municipio-4.html">Municipio</a></li>
<li><a class="" href="localidad-4.html">Localidad</a></li>
<li><a class="" href="ageb-3.html">AGEB</a></li>
<li><a class="" href="resumen-general.html">Resumen general</a></li>
<li><a class="" href="referencias.html">Referencias</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/dvillasanao/ICE_2020">View book repository <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="municipio-4" class="section level1 unlisted unnumbered">
<h1>Municipio<a class="anchor" aria-label="anchor" href="#municipio-4"><i class="fas fa-link"></i></a>
</h1>
<div class="visNetwork html-widget html-fill-item" id="htmlwidget-fe55043aa495db7101f5" style="width:100%;height:672px;"></div>
<script type="application/json" data-for="htmlwidget-fe55043aa495db7101f5">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],"label":["Calidad del entorno","Marginación","ANALF","SBASC","OVSDE","OVSEE","OVSAE","OVPT","PL.5000","VHAC","PO2SM","Equipamiento","Educación","Inicial","Preescolar","Primaria","Secundaria","Bachillerato","Profesional","Centro de atención múltiple","Centros de capacitación","Otros de educación","Salud","Apoyo / Asistencia Social","Primer nivel","Segundo nivel","Tercer nivel","DENUE","Cultura","Asistencia social","Comercio","Comunicaciones","Transporte","Deporte y recreación","Administración pública","Servicios urbanos","Servicios financieros","Hotelería y restaurantes","Talleres","Accesibilidad"],"value":[40,20,10,10,10,10,10,10,10,10,10,20,5,6,6,6,6,6,6,6,6,6,5,8,8,8,8,10,5,5,5,5,5,5,5,5,5,5,5,20],"group":["Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified","Not user-specified"],"shape":["box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box"],"color":["#35608DFF","#33628DFF","#32658EFF","#31678EFF","#306A8EFF","#2E6D8EFF","#2E6F8EFF","#2C718EFF","#2C738EFF","#2A768EFF","#29798EFF","#297B8EFF","#277E8EFF","#27808EFF","#26828EFF","#25858EFF","#24878EFF","#238A8DFF","#228D8DFF","#218F8DFF","#20928CFF","#20938CFF","#1F968BFF","#1F998AFF","#1E9B8AFF","#1F9E89FF","#1FA188FF","#1FA287FF","#21A585FF","#22A785FF","#24AA83FF","#25AD81FF","#28AE80FF","#2CB17EFF","#2EB37CFF","#32B67AFF","#36B878FF","#3ABA76FF","#3FBC73FF","#43BF71FF"],"font.color":["white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white"],"font.size":[28,22,12,12,12,12,12,12,12,12,12,22,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,22],"font.family":["montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat","montserrat"],"shadow":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"edges":{"from":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],"to":["1","2","2","2","2","2","2","2","2","2","1","12","13","13","13","13","13","13","13","13","13","12","23","23","23","23","12","28","28","28","28","28","28","28","28","28","28","28","1"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"ellipse","shapeProperties":{"borderRadius":12},"scaling":{"min":40,"max":80}},"manipulation":{"enabled":false},"edges":{"arrows":"to","smooth":{"enabled":true}},"physics":{"stabilization":false},"layout":{"randomSeed":321},"interaction":{"dragNodes":true,"dragView":true,"hover":true,"keyboard":true,"multiselect":true,"navigationButtons":true,"zoomView":true,"zoomSpeed":2}},"groups":["Not user-specified"],"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Estructura del índice de calidad del entorno","style":"font-family:montserrat; font-size:22px;text-align:center; color;#35608DFF; font-weight: bold;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","events":{"doubleClick":"function openFullscreen() {\n  if (elem.requestFullscreen) {\n    elem.requestFullscreen();\n  } else if (elem.webkitRequestFullscreen) { /* Safari */\n    elem.webkitRequestFullscreen();\n  } else if (elem.msRequestFullscreen) { /* IE11 */\n    elem.msRequestFullscreen();\n  }\n}"}},"evals":["events.doubleClick"],"jsHooks":[]}</script><p>Se toma como referencia el marco geoestadístico nacional 2020 a Nivel
Municipal.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Municipio/MGN.Rdata"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="marginación" class="section level2 unnumbered">
<h2>Marginación<a class="anchor" aria-label="anchor" href="#marginaci%C3%B3n"><i class="fas fa-link"></i></a>
</h2>
<p>Se carga la nueva base del índice de marginación 2020.</p>
<p>Para el cálculo de los componentes principales depende de las unidades
de medida empleadas en las variables. Por lo que es importante, antes de
aplicar <code>PCA</code>, estandarizar los indicadores simples para que tengan
media <strong>0</strong> y desviación estándar <strong>1</strong>, ya que, de lo contrario, las
variables con mayor varianza dominarían al resto, aunque en el caso en
que las variables estén medidas en las mismas unidades, podemos optar
por no estandarizarlas. La estandarización se lleva a cabo restando a
cada observación la media y dividiendo entre la desviación estándar de
la variable a la que pertenece:</p>
<p><span class="math display">\[Z_{i}=\frac{x_{i}-\bar{x}}{\sigma_{i}}\]</span></p>
<p>Se utiliza la función <span class="math inline">\(PCA\)</span> del parquete <strong>FactoMiner</strong>, donde se
especifica que se estandaricen las vairables con el parámetro
<em>scale.unit=TRUE</em></p>
<p><strong>Análisis de componentes principales</strong></p>
<p>Se utilizan todas las variables</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Municipio/IMM.Rdata"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">PCA_IMM</span> <span class="op">&lt;-</span> <span class="fu">PCA</span><span class="op">(</span><span class="va">IMM</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">IMM</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                scale.unit <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                 ncp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">IMM</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">IMM</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                  graph <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<p><strong>Es importante seleccionar que gráficos se pueden incluir en el
análisis</strong></p>
<p>Se utilizó como criterio los gráficos de sedimentación y la contriución
de la variables en cada uno de los componentes y la varianza acumulada</p>
<p>Por otro lado se generan dos índices, de los cuales: - Uno se
estandariza para explicarlos a través de descomposición de valores
singulares (<code>SVD</code>) de la matriz de datos.</p>
<p><span class="math display">\[\mathbf X = \mathbf U \mathbf S \mathbf V^\top\]</span> - Segundo, desde el
punto de vista <code>PCA</code> que requiere el cálculo de los valores propios y
los vectores propios, haciendo la descomposición propia de
<span class="math inline">\(\mathbf X \mathbf X^{T}\)</span>.</p>
<p><span class="math display">\[\mathbf X \mathbf V = \mathbf U \mathbf S \mathbf V^\top \mathbf V = \mathbf U \mathbf S\]</span></p>
<p>Donde - <span class="math inline">\(\mathbf V\)</span> son los eigenvectors - <span class="math inline">\(\mathbf U\)</span> es la matriz
unitaria - <span class="math inline">\(\mathbf S\)</span> es la traza de los eigenvalues</p>
<p>Las columnas de <span class="math inline">\(\mathbf {US}\)</span> son los pesos de las componentes
principales</p>
<p><strong>Se generan los índices de cada uno de los subsistemas</strong> <strong>Se utilizan
a los componentes principales que expliquen el máximo de la
información</strong></p>
<p>Se utilizó como criterio los gráficos de sedimentación y la contriución
de la variables en cada uno de los componentes y la varianza acumulada.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Componentes seleccionadas</span></span>
<span><span class="va">ncp</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span></span>
<span><span class="co"># Índices de las componentes principales seleccionados</span></span>
<span><span class="va">PC_IMM</span> <span class="op">&lt;-</span>  <span class="va">IMM</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                <span class="fu">mutate</span><span class="op">(</span>PC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html">scale</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">IMM</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> </span>
<span>                                        <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">PCA_IMM</span><span class="op">[[</span><span class="st">"var"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"coord"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="va">ncp</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> </span>
<span>                                          <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">PCA_IMM</span><span class="op">[[</span><span class="st">"eig"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">ncp</span><span class="op">]</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">PC_IMM</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PC_IMM.Rdata"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Resumen</strong></p>
<div class="inline-table"><table class=" lightable-classic table table-striped table-hover table-condensed" style="font-family: Century Gothic; width: auto !important; margin-left: auto; margin-right: auto; font-size: 9px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-46">Table 1: </span>Tabla: Resumen de los indicadores de marginación utilizando PCA
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;">
</th>
<th style="text-align:left;font-weight: bold;">
Indicadores
</th>
<th style="text-align:right;font-weight: bold;">
Dim.1
</th>
<th style="text-align:right;font-weight: bold;">
Dim.2
</th>
<th style="text-align:right;font-weight: bold;">
Dim.3
</th>
<th style="text-align:right;font-weight: bold;">
coord
</th>
<th style="text-align:right;font-weight: bold;">
cos2
</th>
<th style="text-align:right;font-weight: bold;">
contrib
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ANALF
</td>
<td style="text-align:left;">
Porcentaje de población de 15 años o más analfabeta
</td>
<td style="text-align:right;">
0.865
</td>
<td style="text-align:right;">
-0.123
</td>
<td style="text-align:right;">
-0.086
</td>
<td style="text-align:right;">
0.770
</td>
<td style="text-align:right;">
0.770
</td>
<td style="text-align:right;">
11.760
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
SBASC
</td>
<td style="text-align:left;">
Porcentaje de población de 15 años o más sin educación básica
</td>
<td style="text-align:right;">
0.830
</td>
<td style="text-align:right;">
-0.330
</td>
<td style="text-align:right;">
0.102
</td>
<td style="text-align:right;">
0.809
</td>
<td style="text-align:right;">
0.809
</td>
<td style="text-align:right;">
12.347
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
OVSDE
</td>
<td style="text-align:left;">
Porcentaje de ocupantes en viviendas sin drenaje ni excusado
</td>
<td style="text-align:right;">
0.499
</td>
<td style="text-align:right;">
0.578
</td>
<td style="text-align:right;">
0.458
</td>
<td style="text-align:right;">
0.793
</td>
<td style="text-align:right;">
0.793
</td>
<td style="text-align:right;">
12.107
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
OVSEE
</td>
<td style="text-align:left;">
Porcentaje de ocupantes en viviendas sin energía eléctrica
</td>
<td style="text-align:right;">
0.558
</td>
<td style="text-align:right;">
0.636
</td>
<td style="text-align:right;">
0.208
</td>
<td style="text-align:right;">
0.759
</td>
<td style="text-align:right;">
0.759
</td>
<td style="text-align:right;">
11.590
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
OVSAE
</td>
<td style="text-align:left;">
Porcentaje de ocupantes en viviendas sin agua entubada
</td>
<td style="text-align:right;">
0.502
</td>
<td style="text-align:right;">
0.315
</td>
<td style="text-align:right;">
-0.530
</td>
<td style="text-align:right;">
0.631
</td>
<td style="text-align:right;">
0.631
</td>
<td style="text-align:right;">
9.640
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
OVPT
</td>
<td style="text-align:left;">
Porcentaje de ocupantes en viviendas con piso de tierra
</td>
<td style="text-align:right;">
0.782
</td>
<td style="text-align:right;">
0.134
</td>
<td style="text-align:right;">
-0.250
</td>
<td style="text-align:right;">
0.692
</td>
<td style="text-align:right;">
0.692
</td>
<td style="text-align:right;">
10.557
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
VHAC
</td>
<td style="text-align:left;">
Porcentaje de población en localidades con menos de 5 000 habitantes
</td>
<td style="text-align:right;">
0.764
</td>
<td style="text-align:right;">
0.025
</td>
<td style="text-align:right;">
-0.227
</td>
<td style="text-align:right;">
0.636
</td>
<td style="text-align:right;">
0.636
</td>
<td style="text-align:right;">
9.705
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
PL.5000
</td>
<td style="text-align:left;">
Porcentaje de viviendas con algún nivel de hacinamiento
</td>
<td style="text-align:right;">
0.621
</td>
<td style="text-align:right;">
-0.376
</td>
<td style="text-align:right;">
0.418
</td>
<td style="text-align:right;">
0.701
</td>
<td style="text-align:right;">
0.701
</td>
<td style="text-align:right;">
10.705
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
PO2SM
</td>
<td style="text-align:left;">
Porcentaje de población ocupada con ingresos de hasta 2 salarios mínimos
</td>
<td style="text-align:right;">
0.772
</td>
<td style="text-align:right;">
-0.403
</td>
<td style="text-align:right;">
0.026
</td>
<td style="text-align:right;">
0.759
</td>
<td style="text-align:right;">
0.759
</td>
<td style="text-align:right;">
11.590
</td>
</tr>
</tbody>
<tfoot><tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Fuente:</span> <sup></sup> Elaboración propia
</td>
</tr></tfoot>
</table></div>
</div>
<div id="equipamiento-1" class="section level2 unnumbered">
<h2>Equipamiento<a class="anchor" aria-label="anchor" href="#equipamiento-1"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Claves económicas</strong></p>
<div id="denue-1" class="section level3 unnumbered">
<h3>DENUE<a class="anchor" aria-label="anchor" href="#denue-1"><i class="fas fa-link"></i></a>
</h3>
<p>Se anexan los indicadores simples, de acuerdo a la clasificación
económica del DENUE (<strong>01</strong>)</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Municipio/Indicadores_DENUE.RData"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Se utiliza la nueva reclasificación de los subsitemas, de los cuales
fueron obtenidos del DENUE</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Claves_subsistema_SCIAN2018.RData"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Subramos</strong></p>
<p>Se toman como referencia 13 subsitemas económicos y 64 elementos
económicos que lo integran</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Subsistemas_DENUE.Rdata"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tablas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">Subsitemas</span><span class="op">)</span></span>
<span><span class="va">tablas</span></span>
<span><span class="co">#&gt;  [1] "Cultura"                "Asistencia_social"      "Comercio"              </span></span>
<span><span class="co">#&gt;  [4] "Comunicaciones"         "Transporte"             "Deporte_Recreacion"    </span></span>
<span><span class="co">#&gt;  [7] "Administracion_publica" "Servicios_urbanos"      "Servicios_financieros" </span></span>
<span><span class="co">#&gt; [10] "Hoteleria_Restaurantes" "Talleres"</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">{</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/assign.html">assign</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"tabla_"</span>,<span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>, <span class="va">denue_mun</span> <span class="op">%&gt;%</span></span>
<span>                                     <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                                      <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span>, <span class="va">Subsitemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                                       <span class="fu">mutate</span><span class="op">(</span>suma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="va">.</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">Subsitemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                                        <span class="fu">mutate</span><span class="op">(</span>suma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">suma</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                                          <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">suma</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                                           <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">suma</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Dimensiones de cálculo</strong></p>
<div class="inline-table"><table class=" lightable-classic table table-striped table-hover table-condensed" style="font-family: Century Gothic; width: auto !important; margin-left: auto; margin-right: auto; font-size: 9px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-51">Table 2: </span>Tabla: Dimensiones de cálculo
</caption>
<thead><tr>
<th style="text-align:center;font-weight: bold;">
Indicadores
</th>
<th style="text-align:center;font-weight: bold;">
Observaciones
</th>
<th style="text-align:center;font-weight: bold;">
Dimensiones
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Cultura
</td>
<td style="text-align:center;">
1 927
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Asistencia_social
</td>
<td style="text-align:center;">
2 180
</td>
<td style="text-align:center;">
5
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Comercio
</td>
<td style="text-align:center;">
2 469
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Comunicaciones
</td>
<td style="text-align:center;">
1 643
</td>
<td style="text-align:center;">
7
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Transporte
</td>
<td style="text-align:center;">
1 411
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Deporte_Recreacion
</td>
<td style="text-align:center;">
1 999
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Administracion_publica
</td>
<td style="text-align:center;">
2 463
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Servicios_urbanos
</td>
<td style="text-align:center;">
1 971
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Servicios_financieros
</td>
<td style="text-align:center;">
1 744
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Hoteleria_Restaurantes
</td>
<td style="text-align:center;">
2 415
</td>
<td style="text-align:center;">
5
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Talleres
</td>
<td style="text-align:center;">
2 135
</td>
<td style="text-align:center;">
2
</td>
</tr>
</tbody>
<tfoot><tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Fuente:</span> <sup></sup> Elaboración propia
</td>
</tr></tfoot>
</table></div>
<p><strong>Análisis de componentes principales</strong></p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ncp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span> ,<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">`rownames&lt;-`</span><span class="op">(</span><span class="va">.</span>,<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">PCA_Subsistemas</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">PCA_Subsistemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">PCA</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"tabla_"</span>, <span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"tabla_"</span>, <span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>, </span>
<span>                                              scale.unit <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                               ncp <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">Subsitemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                                                graph <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Índices de las componentes principales seleccionados</span></span>
<span><span class="va">PC_DENUE</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">PC_DENUE</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"tabla_"</span>, <span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">%&gt;%</span></span>
<span>                     <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                       <span class="fu">mutate</span><span class="op">(</span>PC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html">scale</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"tabla_"</span>, <span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> </span>
<span>                                    <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">PCA_Subsistemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"var"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"coord"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="va">ncp</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> </span>
<span>                                      <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">PCA_Subsistemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"eig"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">ncp</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>                         <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">PC_DENUE</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PC_DENUE.Rdata"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class=" lightable-classic table table-striped table-hover table-condensed" style="font-family: Century Gothic; width: auto !important; margin-left: auto; margin-right: auto; font-size: 9px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-55">Table 3: </span>Tabla: Resumen de los indicadores de asistencia social
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;">
</th>
<th style="text-align:right;font-weight: bold;">
Dim.1
</th>
<th style="text-align:right;font-weight: bold;">
coord
</th>
<th style="text-align:right;font-weight: bold;">
cos2
</th>
<th style="text-align:right;font-weight: bold;">
contrib
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Residencias de asistenacia social
</td>
<td style="text-align:right;">
0.931
</td>
<td style="text-align:right;">
0.868
</td>
<td style="text-align:right;">
0.868
</td>
<td style="text-align:right;">
19.827
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Asilos
</td>
<td style="text-align:right;">
0.890
</td>
<td style="text-align:right;">
0.792
</td>
<td style="text-align:right;">
0.792
</td>
<td style="text-align:right;">
18.103
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Orfanatos
</td>
<td style="text-align:right;">
0.927
</td>
<td style="text-align:right;">
0.860
</td>
<td style="text-align:right;">
0.860
</td>
<td style="text-align:right;">
19.649
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Otros asistencia social
</td>
<td style="text-align:right;">
0.958
</td>
<td style="text-align:right;">
0.918
</td>
<td style="text-align:right;">
0.918
</td>
<td style="text-align:right;">
20.976
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Guarderías
</td>
<td style="text-align:right;">
0.969
</td>
<td style="text-align:right;">
0.938
</td>
<td style="text-align:right;">
0.938
</td>
<td style="text-align:right;">
21.445
</td>
</tr>
</tbody>
<tfoot><tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Fuente:</span> <sup></sup> Elaboración propia
</td>
</tr></tfoot>
</table></div>
<div id="valores-extremos" class="section level4 unnumbered">
<h4>Valores extremos<a class="anchor" aria-label="anchor" href="#valores-extremos"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Principal Components Regression (PCR)</span></span>
<span><span class="va">pcr_model</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">{</span></span>
<span><span class="va">pcr_model</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pls/man/mvr.html">pcr</a></span><span class="op">(</span><span class="va">PC_DENUE</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">~</span><span class="va">.</span>, data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"tabla_"</span>,<span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, ncomp <span class="op">=</span> <span class="va">ncp</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, scale <span class="op">=</span> <span class="cn">TRUE</span>, center <span class="op">=</span> <span class="cn">TRUE</span>, validation <span class="op">=</span> <span class="st">"LOO"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## Se guardan los resultados </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">pcr_model</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/pcr_model_denue.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Caso máximo</span></span>
<span><span class="va">pcr_pred_max</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">Subsitemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">Subsitemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">pcr_pred_max</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">pcr_model</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, <span class="va">test</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">pcr_pred_max</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">ncp</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>, <span class="st">".comp"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## Caso mínimos </span></span>
<span><span class="va">pcr_pred_min</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">Subsitemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">Subsitemas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">pcr_pred_min</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">pcr_model</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, <span class="va">test</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">pcr_extremos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, nrow <span class="op">=</span> <span class="fl">11</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">pcr_extremos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">pcr_extremos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">pcr_pred_max</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span>,<span class="op">]</span><span class="op">[</span><span class="va">ncp</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">pcr_extremos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">pcr_pred_min</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span>,<span class="op">]</span><span class="op">[</span><span class="va">ncp</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">pcr_extremos</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Indicadores"</span>, <span class="st">"Máximo"</span>, <span class="st">"Mínimo"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">pcr_extremos</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PCR_DENUE.txt"</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="educación" class="section level3 unnumbered">
<h3>Educación<a class="anchor" aria-label="anchor" href="#educaci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"Bases/Municipio/Indicadores_Escuelas_SEP.RData"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sep_mun</span> <span class="op">&lt;-</span> <span class="va">sep_mun</span> <span class="op">%&gt;%</span></span>
<span>             <span class="fu">mutate</span><span class="op">(</span>suma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="va">.</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>               <span class="fu">mutate</span><span class="op">(</span>suma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">suma</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">suma</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">suma</span><span class="op">)</span></span></code></pre></div>
<p><strong>Análisis de componentes principales</strong></p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PCA_SEP</span> <span class="op">&lt;-</span> <span class="fu">PCA</span><span class="op">(</span><span class="va">sep_mun</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                scale.unit <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                 ncp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">sep_mun</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                  graph <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Índice estandarizado (SVD)</span></span>
<span><span class="co"># Componentes seleccionadas</span></span>
<span><span class="va">ncp</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="co"># Índices de las componentes principales seleccionados</span></span>
<span><span class="va">PC_SEP</span> <span class="op">&lt;-</span>  <span class="va">sep_mun</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>               <span class="fu">mutate</span><span class="op">(</span>PC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html">scale</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">sep_mun</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> </span>
<span>                              <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">PCA_SEP</span><span class="op">[[</span><span class="st">"var"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"coord"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="va">ncp</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> </span>
<span>                                        <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">PCA_SEP</span><span class="op">[[</span><span class="st">"eig"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">ncp</span><span class="op">]</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">PC_SEP</span>,  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PC_SEP.Rdata"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class=" lightable-classic table table-striped table-hover table-condensed" style="font-family: Century Gothic; width: auto !important; margin-left: auto; margin-right: auto; font-size: 9px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-61">Table 4: </span>Tabla: Resumen de los indicadores de educación utilizando PCA
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;">
</th>
<th style="text-align:right;font-weight: bold;">
Dim.1
</th>
<th style="text-align:right;font-weight: bold;">
Dim.2
</th>
<th style="text-align:right;font-weight: bold;">
coord
</th>
<th style="text-align:right;font-weight: bold;">
cos2
</th>
<th style="text-align:right;font-weight: bold;">
contrib
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Bachillerato
</td>
<td style="text-align:right;">
0.981
</td>
<td style="text-align:right;">
-0.014
</td>
<td style="text-align:right;">
0.963
</td>
<td style="text-align:right;">
0.963
</td>
<td style="text-align:right;">
11.859
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Centro de atención múltiple
</td>
<td style="text-align:right;">
0.927
</td>
<td style="text-align:right;">
-0.011
</td>
<td style="text-align:right;">
0.860
</td>
<td style="text-align:right;">
0.860
</td>
<td style="text-align:right;">
10.600
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Centros de Capacitación
</td>
<td style="text-align:right;">
0.935
</td>
<td style="text-align:right;">
0.120
</td>
<td style="text-align:right;">
0.888
</td>
<td style="text-align:right;">
0.888
</td>
<td style="text-align:right;">
10.944
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Inicial
</td>
<td style="text-align:right;">
0.831
</td>
<td style="text-align:right;">
-0.298
</td>
<td style="text-align:right;">
0.780
</td>
<td style="text-align:right;">
0.780
</td>
<td style="text-align:right;">
9.604
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Otros Educación
</td>
<td style="text-align:right;">
0.528
</td>
<td style="text-align:right;">
0.783
</td>
<td style="text-align:right;">
0.892
</td>
<td style="text-align:right;">
0.892
</td>
<td style="text-align:right;">
10.995
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Preescolar
</td>
<td style="text-align:right;">
0.976
</td>
<td style="text-align:right;">
-0.088
</td>
<td style="text-align:right;">
0.960
</td>
<td style="text-align:right;">
0.960
</td>
<td style="text-align:right;">
11.828
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Primaria
</td>
<td style="text-align:right;">
0.966
</td>
<td style="text-align:right;">
-0.173
</td>
<td style="text-align:right;">
0.964
</td>
<td style="text-align:right;">
0.964
</td>
<td style="text-align:right;">
11.874
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Profesional
</td>
<td style="text-align:right;">
0.905
</td>
<td style="text-align:right;">
0.199
</td>
<td style="text-align:right;">
0.858
</td>
<td style="text-align:right;">
0.858
</td>
<td style="text-align:right;">
10.565
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Secundaria
</td>
<td style="text-align:right;">
0.957
</td>
<td style="text-align:right;">
-0.188
</td>
<td style="text-align:right;">
0.952
</td>
<td style="text-align:right;">
0.952
</td>
<td style="text-align:right;">
11.731
</td>
</tr>
</tbody>
<tfoot><tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Fuente:</span> <sup></sup> Elaboración propia
</td>
</tr></tfoot>
</table></div>
<div id="valores-extremos-1" class="section level4 unnumbered">
<h4>Valores extremos<a class="anchor" aria-label="anchor" href="#valores-extremos-1"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Principal Components Regression (PCR)</span></span>
<span><span class="va">pcr_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pls/man/mvr.html">pcr</a></span><span class="op">(</span><span class="va">PC_SEP</span><span class="op">$</span><span class="va">PC</span><span class="op">~</span><span class="va">.</span>, data <span class="op">=</span> <span class="va">sep_mun</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">]</span>, ncomp <span class="op">=</span> <span class="va">ncp</span>,  scale <span class="op">=</span> <span class="cn">TRUE</span>, center <span class="op">=</span> <span class="cn">TRUE</span>, validation <span class="op">=</span> <span class="st">"LOO"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">pcr_model</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/pcr_model_sep.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Caso máximo</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">sep_mun</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">pcr_pred_max</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">pcr_model</span>, <span class="va">test</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Caso mínimos </span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">sep_mun</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">pcr_pred_min</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">pcr_model</span>, <span class="va">test</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">pcr_extremos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="st">"Indicadores"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Educación"</span><span class="op">)</span>,</span>
<span>                           <span class="st">"Máximo"</span> <span class="op">=</span> <span class="va">pcr_pred_max</span><span class="op">[</span>,<span class="fl">1</span>,<span class="op">]</span><span class="op">[</span><span class="va">ncp</span><span class="op">]</span>,</span>
<span>                           <span class="st">"Mínimo"</span> <span class="op">=</span> <span class="va">pcr_pred_min</span><span class="op">[</span>,<span class="fl">1</span>,<span class="op">]</span><span class="op">[</span><span class="va">ncp</span><span class="op">]</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">pcr_extremos</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PCR_SEP.txt"</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="salud" class="section level3 unnumbered">
<h3>Salud<a class="anchor" aria-label="anchor" href="#salud"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Municipio/Indicadores_CLUES.RData"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">clues_mun</span> <span class="op">&lt;-</span> <span class="va">clues_mun</span> <span class="op">%&gt;%</span></span>
<span>             <span class="fu">mutate</span><span class="op">(</span>suma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="va">.</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>               <span class="fu">mutate</span><span class="op">(</span>suma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">suma</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">suma</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">suma</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PCA_CLUES</span> <span class="op">&lt;-</span> <span class="fu">PCA</span><span class="op">(</span><span class="va">clues_mun</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                  scale.unit <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                   ncp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">clues_mun</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                    graph <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Índice estandarizado (SVD)</span></span>
<span><span class="co"># Componentes seleccionadas</span></span>
<span><span class="va">ncp</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span></span>
<span><span class="co"># Índices de las componentes principales seleccionados</span></span>
<span><span class="va">PC_CLUES</span> <span class="op">&lt;-</span>  <span class="va">clues_mun</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>               <span class="fu">mutate</span><span class="op">(</span>PC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html">scale</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">clues_mun</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> </span>
<span>                                       <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">PCA_CLUES</span><span class="op">[[</span><span class="st">"var"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"coord"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="va">ncp</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> </span>
<span>                                        <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">PCA_CLUES</span><span class="op">[[</span><span class="st">"eig"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">ncp</span><span class="op">]</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">PC_CLUES</span>,  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PC_CLUES.Rdata"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class=" lightable-classic table table-striped table-hover table-condensed" style="font-family: Century Gothic; width: auto !important; margin-left: auto; margin-right: auto; font-size: 9px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<thead><tr>
<th style="text-align:left;font-weight: bold;">
</th>
<th style="text-align:right;font-weight: bold;">
Dim.1
</th>
<th style="text-align:right;font-weight: bold;">
coord
</th>
<th style="text-align:right;font-weight: bold;">
cos2
</th>
<th style="text-align:right;font-weight: bold;">
contrib
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Apoyo / Asistencia Social
</td>
<td style="text-align:right;">
0.928
</td>
<td style="text-align:right;">
0.862
</td>
<td style="text-align:right;">
0.862
</td>
<td style="text-align:right;">
26.750
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Primer Nivel
</td>
<td style="text-align:right;">
0.925
</td>
<td style="text-align:right;">
0.856
</td>
<td style="text-align:right;">
0.856
</td>
<td style="text-align:right;">
26.561
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Segundo Nivel
</td>
<td style="text-align:right;">
0.934
</td>
<td style="text-align:right;">
0.872
</td>
<td style="text-align:right;">
0.872
</td>
<td style="text-align:right;">
27.055
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Tercer Nivel
</td>
<td style="text-align:right;">
0.795
</td>
<td style="text-align:right;">
0.633
</td>
<td style="text-align:right;">
0.633
</td>
<td style="text-align:right;">
19.634
</td>
</tr>
</tbody>
<tfoot><tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Fuente:</span> <sup></sup> Elaboración propia
</td>
</tr></tfoot>
</table></div>
<div id="caso-extremos" class="section level4 unnumbered">
<h4>Caso extremos<a class="anchor" aria-label="anchor" href="#caso-extremos"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Principal Components Regression (PCR)</span></span>
<span><span class="va">pcr_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pls/man/mvr.html">pcr</a></span><span class="op">(</span><span class="va">PC_CLUES</span><span class="op">$</span><span class="va">PC</span><span class="op">~</span><span class="va">.</span>, data <span class="op">=</span> <span class="va">clues_mun</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span>, ncomp <span class="op">=</span> <span class="va">ncp</span>,  scale <span class="op">=</span> <span class="cn">TRUE</span>, center <span class="op">=</span> <span class="cn">TRUE</span>, validation <span class="op">=</span> <span class="st">"LOO"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">pcr_model</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/pcr_model_clues.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Caso máximo</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">clues_mun</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">pcr_pred_max</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">pcr_model</span>, <span class="va">test</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Caso mínimos </span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">clues_mun</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">pcr_pred_min</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">pcr_model</span>, <span class="va">test</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pcr_extremos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="st">"Indicadores"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Educación"</span><span class="op">)</span>,</span>
<span>                           <span class="st">"Máximo"</span> <span class="op">=</span> <span class="va">pcr_pred_max</span><span class="op">[</span>,<span class="fl">1</span>,<span class="op">]</span><span class="op">[</span><span class="va">ncp</span><span class="op">]</span>,</span>
<span>                           <span class="st">"Mínimo"</span> <span class="op">=</span> <span class="va">pcr_pred_min</span><span class="op">[</span>,<span class="fl">1</span>,<span class="op">]</span><span class="op">[</span><span class="va">ncp</span><span class="op">]</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">pcr_extremos</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PCR_CLUES.txt"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div id="accesibilidad" class="section level2 unnumbered">
<h2>Accesibilidad<a class="anchor" aria-label="anchor" href="#accesibilidad"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Índice de accesibilidad</strong></p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Municipio/IA_municipio.Rdata"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="calidad-del-entorno" class="section level2 unnumbered">
<h2>Calidad del entorno<a class="anchor" aria-label="anchor" href="#calidad-del-entorno"><i class="fas fa-link"></i></a>
</h2>
<p><strong>MGN</strong></p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Municipio/MGN.RData"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PC_IMM.Rdata"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">IMM</span> <span class="op">&lt;-</span> <span class="va">PC_IMM</span> <span class="op">%&gt;%</span></span>
<span>        <span class="fu">rename</span><span class="op">(</span><span class="st">"IMM"</span> <span class="op">=</span> <span class="st">"PC"</span><span class="op">)</span></span></code></pre></div>
<p><strong>DENUE</strong></p>
<p>Se excluyen los subsistemas de <code>Educación</code> y <code>Salud</code>.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Subsistemas_DENUE.Rdata"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">Indicadores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">Subsitemas</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PC_DENUE.Rdata"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tabla</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="va">i</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl">1</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">tabla_DENUE</span> <span class="op">&lt;-</span> <span class="va">PC_DENUE</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">tabla</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">MGN_mun</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span><span class="op">)</span>, <span class="va">tabla_DENUE</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CVE_MUN"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">tabla_DENUE</span> <span class="op">&lt;-</span> <span class="va">PC_DENUE</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">tabla</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">MGN_mun</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span><span class="op">)</span>, <span class="va">tabla_DENUE</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CVE_MUN"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                 <span class="fu">select</span><span class="op">(</span><span class="va">.</span>,<span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">DENUE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="va">cbind.data.frame</span>, <span class="va">tabla</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">DENUE</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CVE_MUN"</span>, <span class="va">Indicadores</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">tabla_DENUE</span><span class="op">)</span></span></code></pre></div>
<p><strong>SEP</strong></p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PC_SEP.RData"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">SEP</span> <span class="op">&lt;-</span> <span class="va">PC_SEP</span> <span class="op">%&gt;%</span></span>
<span>         <span class="fu">rename</span><span class="op">(</span><span class="st">"Educacion"</span> <span class="op">=</span> <span class="st">"PC"</span><span class="op">)</span></span></code></pre></div>
<p><strong>CLUES</strong></p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PC_CLUES.RData"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">CLUES</span> <span class="op">&lt;-</span> <span class="va">PC_CLUES</span> <span class="op">%&gt;%</span></span>
<span>          <span class="fu">rename</span><span class="op">(</span><span class="st">"Salud"</span> <span class="op">=</span> <span class="st">"PC"</span><span class="op">)</span></span></code></pre></div>
<p>** Índice de accesibilidad a nivel municipio**</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Municipio/IA_municipio.Rdata"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">IAL</span> <span class="op">&lt;-</span> <span class="va">accesibilidad_mun</span> <span class="op">%&gt;%</span></span>
<span>         <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span>, <span class="va">IAL</span><span class="op">)</span> </span></code></pre></div>
<p><strong>Integración del ICE</strong></p>
<p><strong>Imputación de valores faltantes</strong></p>
<p>A los valores faltantes de equipamiento se les imputa el valor mínimos
que puede obtener cada subsistema, calculados por el método de
componentes principales. Siendo estos los valores extremos (falta de
equipamiento), este valor se formuló utilizando Principal Component
Regresion (PCR) y de esta manera poder obtener el valor predictivo del
valor mínimo.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PCR_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PCR_SEP.txt"</span><span class="op">)</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">.</span>,<span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PCR_CLUES.txt"</span><span class="op">)</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/PCR_DENUE.txt"</span><span class="op">)</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ICE_2020</span> <span class="op">&lt;-</span> <span class="va">MGN_mun</span> <span class="op">%&gt;%</span></span>
<span>             <span class="fu">select</span><span class="op">(</span><span class="va">CVE_MUN</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>, <span class="va">IMM</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CVE_MUN"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>               <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>, <span class="va">SEP</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CVE_MUN"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>, <span class="va">CLUES</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CVE_MUN"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                 <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>, <span class="va">DENUE</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CVE_MUN"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>                  <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>, <span class="va">IAL</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CVE_MUN"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>                   <span class="fu">mutate_at</span><span class="op">(</span><span class="fu">vars</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">16</span><span class="op">)</span>, <span class="va">as.numeric</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">ICE_2020</span> <span class="op">&lt;-</span> <span class="va">ICE_2020</span> <span class="op">%&gt;%</span></span>
<span>                <span class="fu">mutate</span><span class="op">(</span>Educacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Educacion</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Educacion</span><span class="op">)</span>,</span>
<span>                       Salud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Salud</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Salud</span><span class="op">)</span>,</span>
<span>                       Cultura <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Cultura</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Cultura</span><span class="op">)</span>,</span>
<span>                       Asistencia_social <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Asistencia_social</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">4</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Asistencia_social</span><span class="op">)</span>,</span>
<span>                       Comercio <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Comercio</span> <span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">5</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Comercio</span> <span class="op">)</span>,</span>
<span>                       Comunicaciones <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Comunicaciones</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">6</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Comunicaciones</span><span class="op">)</span>,</span>
<span>                       Transporte <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Transporte</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">7</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Transporte</span><span class="op">)</span>,</span>
<span>                       Deporte_Recreacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Deporte_Recreacion</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">8</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Deporte_Recreacion</span><span class="op">)</span>,</span>
<span>                       Administracion_publica <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Administracion_publica</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">9</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Administracion_publica</span><span class="op">)</span>,</span>
<span>                       Servicios_urbanos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Servicios_urbanos</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">10</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Servicios_urbanos</span><span class="op">)</span>,</span>
<span>                       Servicios_financieros <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Servicios_financieros</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">11</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Servicios_financieros</span><span class="op">)</span>,</span>
<span>                       Hoteleria_Restaurantes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Hoteleria_Restaurantes</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">12</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Hoteleria_Restaurantes</span><span class="op">)</span>,</span>
<span>                       Talleres <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">Talleres</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">PCR_pred</span><span class="op">[</span><span class="fl">13</span>, <span class="fl">3</span><span class="op">]</span>, <span class="va">.</span><span class="op">$</span><span class="va">Talleres</span><span class="op">)</span></span>
<span>                       <span class="op">)</span></span></code></pre></div>
<div id="método-de-distancias-dp_2" class="section level3 unnumbered">
<h3>Método de Distancias <span class="math inline">\(DP_2\)</span><a class="anchor" aria-label="anchor" href="#m%C3%A9todo-de-distancias-dp_2"><i class="fas fa-link"></i></a>
</h3>
<p>José Bernardo Pena Trapero:
<code>Problemas de la medición del bienestar y conceptos afines (1977)</code></p>
<p>Primeramente se define como es la entrada de los indicadores simples.<br>
Este tipo de método - Índice de marginación (Negativo) (Marginación baja
(-Negativa) / Marginación alta (Positiva)) - Índice de equipamiento +
CLUES (Postivo) + SEP (Postivo) + DENUE (Positivo) - Indice de
accesibilidad (Negativo) (Accesibilidad alta (cercanos a cero) /
Accesibilidad baja (Alejados del cero))</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va">p2distance</span><span class="op">)</span></span>
<span><span class="va">ICE_2020_data</span> <span class="op">&lt;-</span> <span class="va">ICE_2020</span> <span class="op">%&gt;%</span></span>
<span>                   <span class="fu">mutate</span><span class="op">(</span>IMM <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">*</span><span class="va">.</span><span class="op">$</span><span class="va">IMM</span>,</span>
<span>                          IAL <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">*</span><span class="va">.</span><span class="op">$</span><span class="va">IAL</span><span class="op">)</span></span></code></pre></div>
<p><strong>Base de referencia</strong></p>
<p><strong>Nota.-</strong> Se toma como base de referencia el valor del mínimo de cada
indicador simple.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va">p2distance</span><span class="op">)</span></span>
<span><span class="va">minRV</span> <span class="op">&lt;-</span> <span class="fu">p2distance</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/p2distance/man/makeReferenceVector.html">makeReferenceVector</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">ICE_2020_data</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>                                          reference_vector_function <span class="op">=</span> <span class="st">'min'</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class=" lightable-classic table table-striped table-hover table-condensed" style="font-family: Century Gothic; width: auto !important; margin-left: auto; margin-right: auto; font-size: 9px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-81">Table 5: </span>Tabla: Base de referencia a nivel municipal
</caption>
<thead><tr>
<th style="text-align:center;font-weight: bold;">
Indicadores
</th>
<th style="text-align:center;font-weight: bold;">
Base de referencia
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
IMM
</td>
<td style="text-align:center;">
-17.5786
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Educacion
</td>
<td style="text-align:center;">
-2.1808
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Salud
</td>
<td style="text-align:center;">
-0.7808
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Cultura
</td>
<td style="text-align:center;">
-0.6485
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Asistencia_social
</td>
<td style="text-align:center;">
-1.1335
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Comercio
</td>
<td style="text-align:center;">
-0.9051
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Comunicaciones
</td>
<td style="text-align:center;">
-1.7239
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Transporte
</td>
<td style="text-align:center;">
-0.7211
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Deporte_Recreacion
</td>
<td style="text-align:center;">
-1.5111
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Administracion_publica
</td>
<td style="text-align:center;">
-1.0183
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Servicios_urbanos
</td>
<td style="text-align:center;">
-1.0297
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Servicios_financieros
</td>
<td style="text-align:center;">
-1.1336
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Hoteleria_Restaurantes
</td>
<td style="text-align:center;">
-1.0089
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
Talleres
</td>
<td style="text-align:center;">
-0.5990
</td>
</tr>
<tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;">
IAL
</td>
<td style="text-align:center;">
-373.0000
</td>
</tr>
</tbody>
<tfoot><tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Fuente:</span> <sup></sup> Elaboración propia
</td>
</tr></tfoot>
</table></div>
<p><strong>Método de Distancia</strong> <span class="math inline">\(DP_{2}\)</span></p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##Calculo del Método de Distancias DP2</span></span>
<span><span class="va">ind_ice</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/p2distance/man/p2distance.html">p2distance</a></span><span class="op">(</span>matriz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">ICE_2020_data</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, </span>
<span>                       reference_vector <span class="op">=</span> <span class="va">minRV</span>, </span>
<span>                        iterations <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Iteration 1"</span></span>
<span><span class="co">#&gt; [1] "Iteration 2"</span></span>
<span><span class="co">#&gt; [1] "Iteration 3"</span></span></code></pre></div>
<p>El modelo converge a la cuarta iteración</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ind_ice</span><span class="op">$</span><span class="va">iteration</span></span>
<span><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ICE_2020</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">ICE_2020</span>, <span class="va">ind_ice</span><span class="op">[[</span><span class="st">"p2distance"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Se cambian los nombres de las columnas </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">)</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">]</span>, <span class="st">"ICE"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="ICE_2020_files/figure-html/unnamed-chunk-85-1.png" width="672"></div>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Se identifican los outliers en el índice de calidad del entorno</span></span>
<span><span class="co">#boxplot.stats(DP2_2010$IM_2010)$out</span></span>
<span><span class="va">outliers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/boxplot.stats.html">boxplot.stats</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">$</span><span class="va">ICE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Se crea un índice ficticio quitando los outliers   </span></span>
<span><span class="va">ICE_2020</span> <span class="op">&lt;-</span> <span class="va">ICE_2020</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu">mutate</span><span class="op">(</span>ICE_out <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">ICE</span> <span class="op">&lt;</span> <span class="va">outliers</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">~</span> <span class="va">outliers</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                                         <span class="va">.</span><span class="op">$</span><span class="va">ICE</span> <span class="op">&gt;</span> <span class="va">outliers</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="op">~</span> <span class="va">outliers</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>,</span>
<span>                                         <span class="va">.</span><span class="op">$</span><span class="va">ICE</span> <span class="op">&gt;=</span> <span class="va">outliers</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">|</span> <span class="va">.</span><span class="op">$</span><span class="va">ICE</span> <span class="op">&lt;=</span> <span class="va">outliers</span><span class="op">$</span><span class="va">stats</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="op">~</span> <span class="va">.</span><span class="op">$</span><span class="va">ICE</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
</div>
<div id="método-de-estratificación" class="section level3 unnumbered">
<h3>Método de estratificación<a class="anchor" aria-label="anchor" href="#m%C3%A9todo-de-estratificaci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<p><code>strata.cumrootf</code>: cumulative root frequency method by Dalenius and
Hodges (1959)<br></p>
<p><strong>Nclass óptimo del método de Dalenius &amp; Hodge</strong></p>
<p><code>alloc</code> lista que especifica el esquema de asignación. La lista debe
contener 3 números para los 3 exponentes q1, q2 y q3 en el esquema de
asignación general (ver paquete de <code>stratification</code>). El valor
predeterminado es la asignación de <strong>Neyman</strong> (q1 = q3 = 0.5 y q2 = 0)</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">start.time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Se define el coeficiente de variación a usar</span></span>
<span><span class="va">coef.var</span> <span class="op">&lt;-</span> <span class="fl">0.05</span></span>
<span></span>
<span><span class="va">DH_Municipio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, nrow <span class="op">=</span> <span class="op">(</span><span class="fl">1000</span> <span class="op">-</span> <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="va">meanh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, nrow <span class="op">=</span> <span class="op">(</span><span class="fl">1000</span> <span class="op">-</span> <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span>  <span class="va">varh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, nrow<span class="op">=</span><span class="op">(</span><span class="fl">1000</span> <span class="op">-</span> <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span> <span class="kw">for</span> <span class="op">(</span><span class="va">n</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1000</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>   <span class="va">DH_Municipio</span><span class="op">[[</span><span class="va">n</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">strata.cumrootf</span><span class="op">(</span>x <span class="op">=</span> <span class="va">ICE_2020</span><span class="op">$</span><span class="va">ICE_out</span>, CV <span class="op">=</span> <span class="va">coef.var</span> , Ls <span class="op">=</span> <span class="fl">5</span>, alloc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span>, nclass <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span>   <span class="va">cum</span> <span class="op">&lt;-</span> <span class="va">DH_Municipio</span><span class="op">[[</span><span class="va">n</span><span class="op">]</span><span class="op">]</span></span>
<span>   <span class="va">sd</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">cum</span><span class="op">$</span><span class="va">stderr</span>, <span class="va">cum</span><span class="op">$</span><span class="va">CV</span><span class="op">)</span></span>
<span>   <span class="va">meanh</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">cum</span><span class="op">$</span><span class="va">meanh</span><span class="op">)</span></span>
<span>   <span class="va">varh</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">cum</span><span class="op">$</span><span class="va">varh</span><span class="op">)</span></span>
<span>   <span class="va">i</span> <span class="op">&lt;-</span> <span class="va">i</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">sd</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"sderr"</span>, <span class="st">"CV"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">meanh</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"nclass"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Strata"</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">varh</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"nclass"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Strata"</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">end.time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">time.taken</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">end.time</span> <span class="op">-</span> <span class="va">start.time</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">time.taken</span></span>
<span></span>
<span><span class="co">#Se guardan los resultados de las iteraciones</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">sd</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Output/Municipio/sd.Rdata"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">min.strata</span> <span class="op">&lt;-</span> <span class="va">sd</span> <span class="op">%&gt;%</span></span>
<span>               <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>                <span class="fu">slice</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.min</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">CV</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="row">
<div class="col-md-3">
<div class="inline-table"><table class=" lightable-classic table table-striped table-hover table-condensed" style="font-family: Century Gothic; width: auto !important; margin-left: auto; margin-right: auto; font-size: 9px; margin-left: auto; margin-right: auto;border-bottom: 0;">
<thead><tr>
<th style="text-align:center;font-weight: bold;">
n
</th>
<th style="text-align:center;font-weight: bold;">
Error
estándar
</th>
<th style="text-align:center;font-weight: bold;">
CV
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:center;font-weight: bold;border-right:1px solid;vertical-align: middle !important; padding: 2px 8px;">
24
</td>
<td style="text-align:center;vertical-align: middle !important; padding: 2px 8px;">
0.1914
</td>
<td style="text-align:center;vertical-align: middle !important; padding: 2px 8px;">
0.0175
</td>
</tr></tbody>
<tfoot><tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Fuente:</span> <sup></sup> Elaboración propia
</td>
</tr></tfoot>
</table></div>
</div>
<div class="col-md-8">
<div class="inline-figure"><img src="ICE_2020_files/figure-html/unnamed-chunk-91-1.png" width="80%" height="80%"></div>
</div>
</div>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">strata.ice</span> <span class="op">&lt;-</span> <span class="fu">strata.cumrootf</span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">$</span><span class="va">ICE_out</span>,</span>
<span>                               CV <span class="op">=</span> <span class="fl">0.05</span>,  <span class="co">## Revisar que tenga el mismo CV</span></span>
<span>                                Ls <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                 alloc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0</span>,<span class="fl">0.5</span><span class="op">)</span>, </span>
<span>                                  nclass <span class="op">=</span> <span class="va">min.strata</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Se agrega a la base de datos</span></span>
<span><span class="va">ICE_2020</span> <span class="op">&lt;-</span> <span class="va">ICE_2020</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">ICE_out</span><span class="op">)</span> <span class="op">%&gt;%</span>   <span class="co"># Se quita el índice ficticio</span></span>
<span>                <span class="fu">mutate</span><span class="op">(</span>G.ICE <span class="op">=</span> <span class="va">strata.ice</span><span class="op">[[</span><span class="st">"stratumID"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Se cambian los nombres de las columnas </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">)</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">]</span>, <span class="st">"G.ICE"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Se cambian los levels de D&amp;H</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">$</span><span class="va">G.ICE</span><span class="op">)</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Completa"</span>, <span class="st">"Grave"</span>, <span class="st">"Moderada"</span>, <span class="st">"Ligera"</span>, <span class="st">"No hay"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="índice-normalizado" class="section level3 unnumbered">
<h3>Índice normalizado<a class="anchor" aria-label="anchor" href="#%C3%ADndice-normalizado"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Indice normalizado</strong></p>
<p><strong>Escenarios del mínimo y máximo valor en el índice DP2</strong></p>
<p><strong>Se guarda la bases de Datos del ICE por municipio</strong></p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Desviación estandar de los indicadores</span></span>
<span><span class="va">desvest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">16</span><span class="op">]</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, <span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                        <span class="fu">rename</span><span class="op">(</span><span class="st">"desvest"</span> <span class="op">=</span><span class="st">"V1"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                          <span class="fu">mutate</span><span class="op">(</span>sd_muestral <span class="op">=</span> <span class="va">.</span><span class="op">$</span><span class="va">desvest</span> <span class="op">*</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">16</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">16</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                            <span class="fu">mutate</span><span class="op">(</span>desvest.inversa <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">sd_muestral</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Escenario mínimo</span></span>
<span><span class="va">vector_minimo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">minRV</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tabla</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">vector_minimo</span> <span class="op">-</span> <span class="va">minRV</span><span class="op">)</span><span class="op">*</span> <span class="va">desvest</span><span class="op">$</span><span class="va">desvest.inversa</span> <span class="op">*</span></span>
<span>           <span class="va">ind_ice</span><span class="op">[[</span><span class="st">"correction_factors"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">16</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">minimo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Escenario <span class="op">=</span> <span class="st">"Mínimo"</span>, <span class="va">tabla</span>, DP2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">tabla</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Escenario mínimo  </span></span>
<span><span class="va">vector_maximo</span> <span class="op">&lt;-</span> <span class="fu">p2distance</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/p2distance/man/makeReferenceVector.html">makeReferenceVector</a></span><span class="op">(</span><span class="va">ICE_2020_data</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, reference_vector_function <span class="op">=</span> <span class="st">'max'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tabla</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">vector_maximo</span> <span class="op">-</span> <span class="va">minRV</span><span class="op">)</span><span class="op">*</span> <span class="va">desvest</span><span class="op">$</span><span class="va">desvest.inversa</span> <span class="op">*</span></span>
<span>           <span class="va">ind_ice</span><span class="op">[[</span><span class="st">"correction_factors"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">ICE_2020</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">16</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">]</span> </span>
<span></span>
<span><span class="va">maximo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Escenario <span class="op">=</span> <span class="st">"Máximo"</span>, <span class="va">tabla</span>, DP2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">tabla</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Indice normalizado</span></span>
<span><span class="va">min_DP2</span> <span class="op">&lt;-</span> <span class="va">minimo</span><span class="op">$</span><span class="va">DP2</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">max_DP2</span> <span class="op">&lt;-</span> <span class="va">maximo</span><span class="op">$</span><span class="va">DP2</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="va">ICE_2020</span> <span class="op">&lt;-</span> <span class="va">ICE_2020</span> <span class="op">%&gt;%</span></span>
<span>              <span class="fu">mutate</span><span class="op">(</span>ICE_Norm <span class="op">=</span> <span class="op">(</span><span class="va">max_DP2</span> <span class="op">-</span> <span class="va">.</span><span class="op">$</span><span class="va">ICE</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">max_DP2</span> <span class="op">-</span> <span class="va">min_DP2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Se guarda el índice de calidad del entorno normalizado</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">ICE_2020</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/Bases/Municipio/ICE_2020.RData"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="fuentes-de-informaci%C3%B3n.html">Fuentes de información</a></div>
<div class="next"><a href="localidad-4.html">Localidad</a></div>
</div></main><div class="col-md-2 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <img id="cover" class="d-none d-lg-block" src="https://raw.githubusercontent.com/dvillasanao/ICE_2020/main/images/logo.svg" width="198.43" height="190.43" style="margin: 0 auto; max-width: 70%; max-height: 50%;"><nav id="toc" data-toggle="toc" aria-label="On this page" class="indice_derecha"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#municipio-4">Municipio</a></li>
<li><a class="nav-link" href="#marginaci%C3%B3n">Marginación</a></li>
<li>
<a class="nav-link" href="#equipamiento-1">Equipamiento</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#denue-1">DENUE</a></li>
<li><a class="nav-link" href="#educaci%C3%B3n">Educación</a></li>
<li><a class="nav-link" href="#salud">Salud</a></li>
</ul>
</li>
<li><a class="nav-link" href="#accesibilidad">Accesibilidad</a></li>
<li>
<a class="nav-link" href="#calidad-del-entorno">Calidad del entorno</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#m%C3%A9todo-de-distancias-dp_2">Método de Distancias \(DP_2\)</a></li>
<li><a class="nav-link" href="#m%C3%A9todo-de-estratificaci%C3%B3n">Método de estratificación</a></li>
<li><a class="nav-link" href="#%C3%ADndice-normalizado">Índice normalizado</a></li>
</ul>
</li>
</ul>
      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/dvillasanao/ICE_2020/blob/master/03_Municipio.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/dvillasanao/ICE_2020/edit/master/03_Municipio.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container-fluid">
    <div class="row">
      <div class="d-none d-lg-block col-lg-2 sidebar"></div>
      <div class="col-sm-12 col-md-9 col-lg-7 mt-3" style="max-width: 45rem;">
        <p>"Índice de Calidad del Entorno 2020" was written by Diana Villasana Ocampo.</p>
      </div>
      <div class="col-md-3 col-lg-3 d-none d-md-block sidebar"></div>
    </div>
  </div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
